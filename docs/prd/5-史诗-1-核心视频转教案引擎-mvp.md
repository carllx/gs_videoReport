# 5. 史诗 1: 核心视频转教案引擎 (MVP)

**目标**: 交付一个功能性的命令行工具，该工具能成功处理单个 YouTube 视频，并生成一份包含精确时间戳的高质量、结构化 Markdown 教案。

## 故事 1.1: 项目初始化与配置加载

- **作为一个用户**，我希望能初始化项目并安全地配置我的 API 密钥，**以便** 应用程序为后续开发做好准备，并能成功地进行服务认证。
    
- **验收标准**:
    
    1. 项目基础结构已创建（例如，包含 `pyproject.toml` 用于依赖管理）。
        
    2. 应用程序可以成功地从外部配置文件（如 `config.yaml`）中读取 Google API 密钥。
        
    3. 一个基础的 CLI 命令（如 `gs_videoReport --version`）能够成功运行，证明环境设置无误。
        

## 故事 1.2: 命令行接口与输入验证

- **作为一个用户**，我希望能在命令行中通过参数传入一个 YouTube URL，**以便** 启动视频分析流程。
    
- **验收标准**:
    
    1. 应用程序能接受一个 URL作为命令行参数（满足 **FR1**）。
        
    2. 当传入一个有效的 YouTube URL 时，程序能够识别并继续执行。
        
    3. 当传入一个无效或非 YouTube URL 时，程序会退出并显示清晰的错误提示（满足 **FR2**）。
        
    4. 当没有传入 URL 时，程序会显示帮助信息，说明正确的用法。
        

## 故事 1.3: API 交互与核心内容分析

- **作为一个用户**，我希望应用程序能将我提供的 YouTube URL 发送到 Google Gemini API，**以便** 对视频内容进行核心分析。
    
- **验收标准**:
    
    1. 给定一个有效的 YouTube URL，应用程序能成功地向 Google Gemini API 发起分析请求（满足 **FR3**）。
        
    2. 应用程序能成功接收并解析 API 的响应。
        
    3. 在 API 调用期间，终端会显示实时进度状态，告知用户当前进展（满足 **NFR4**）。
        
    4. 如果 API 返回错误（如密钥无效、超额），程序能捕获并向用户显示友好的错误信息。
        

## 故事 1.4: 教案格式化与文件输出

- **作为一个用户**，我希望分析后的内容能被格式化成结构化的 Markdown 教案并保存到本地，**以便** 我能获得一个最终可用的文件。
    
- **验收标准**:
    
    1. API 返回的内容被正确地填入一个标准的 Markdown 教案模板中（满足 **FR4**）。
        
    2. 生成的教案中包含了基于分析的、可点击的精确 YouTube 时间戳（满足 **FR5**）。
        
    3. Markdown 文件的顶部包含了与 Obsidian Dataview 兼容的元数据（YAML Frontmatter）（满足 **NFR5**）。
        
    4. 最终的 `.md` 文件被成功保存到本地文件系统（满足 **FR6**）。
        
    5. 用户可以通过命令行参数指定文件的输出路径。
        
    6. 程序成功执行后，会在终端显示成功信息及产出文件的路径。
        
