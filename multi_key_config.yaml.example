# gs_videoReport v2.1 å¤šå¯†é’¥é…ç½®ç¤ºä¾‹
# è¿™æ˜¯ä¸“é—¨ç”¨äºå¤šå¯†é’¥ç®¡ç†çš„é…ç½®æ–‡ä»¶

# âš ï¸ å®‰å…¨æé†’ï¼š
# 1. å¤åˆ¶æ­¤æ–‡ä»¶ä¸º multi_key_config.yaml
# 2. å¡«å…¥æ‚¨çš„çœŸå®APIå¯†é’¥
# 3. è¯¥æ–‡ä»¶å·²åŠ å…¥.gitignoreï¼Œä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

# ğŸ”‘ å¤šå¯†é’¥é…ç½®
api_keys:
  account_1:
    key: "AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXX"  # æ›¿æ¢ä¸ºæ‚¨çš„ç¬¬1ä¸ªAPIå¯†é’¥
    name: "ä¸»è´¦æˆ·"
    daily_limit: 100                        # Googleå…è´¹å±‚æ¯æ—¥100è¯·æ±‚
    priority: 1                             # ä¼˜å…ˆçº§ (1=æœ€é«˜)
    description: "ä¸»è¦è´¦æˆ·ï¼Œç”¨äºæ—¥å¸¸å¤„ç†"
    
  account_2:
    key: "AIzaSyYYYYYYYYYYYYYYYYYYYYYYYY"  # æ›¿æ¢ä¸ºæ‚¨çš„ç¬¬2ä¸ªAPIå¯†é’¥
    name: "å¤‡ç”¨è´¦æˆ·1"
    daily_limit: 100
    priority: 2
    description: "å¤‡ç”¨è´¦æˆ·ï¼Œä¸»è´¦æˆ·è€—å°½æ—¶ä½¿ç”¨"
    
  account_3:
    key: "AIzaSyZZZZZZZZZZZZZZZZZZZZZZZZ"  # æ›¿æ¢ä¸ºæ‚¨çš„ç¬¬3ä¸ªAPIå¯†é’¥
    name: "å¤‡ç”¨è´¦æˆ·2"
    daily_limit: 100  
    priority: 3
    description: "ç¬¬äºŒå¤‡ç”¨è´¦æˆ·ï¼Œç¡®ä¿è¿ç»­å¤„ç†èƒ½åŠ›"

# ğŸ“Š å¤„ç†é…ç½®
processing:
  max_concurrent_keys: 2        # æœ€å¤§åŒæ—¶ä½¿ç”¨çš„å¯†é’¥æ•° (æ¨è2ä¸ª)
  requests_per_video: 5         # æ¯ä¸ªè§†é¢‘é¢„ä¼°æ¶ˆè€—çš„è¯·æ±‚æ•°
  safety_buffer: 10             # æ¯ä¸ªå¯†é’¥ä¿ç•™çš„å®‰å…¨ç¼“å†²è¯·æ±‚æ•°
  retry_attempts: 3             # APIå¤±è´¥æ—¶çš„é‡è¯•æ¬¡æ•°
  exponential_backoff: true     # å¯ç”¨æŒ‡æ•°é€€é¿é‡è¯•ç­–ç•¥
  max_retry_delay: 300          # æœ€å¤§é‡è¯•å»¶è¿Ÿæ—¶é—´(ç§’)

# ğŸ“ˆ ç›‘æ§é…ç½®
monitoring:
  check_interval: 300           # é…é¢æ£€æŸ¥é—´éš”(ç§’) - 5åˆ†é’Ÿ
  quota_warning_threshold: 20   # é…é¢è­¦å‘Šé˜ˆå€¼ (å‰©ä½™è¯·æ±‚æ•°)
  quota_critical_threshold: 5   # é…é¢ä¸¥é‡è­¦å‘Šé˜ˆå€¼
  save_status_file: true        # ä¿å­˜é…é¢çŠ¶æ€åˆ°æ–‡ä»¶
  status_file_path: "quota_status.json"  # çŠ¶æ€æ–‡ä»¶è·¯å¾„
  enable_dashboard: true        # å¯ç”¨Richä»ªè¡¨ç›˜æ˜¾ç¤º
  dashboard_refresh_interval: 60  # ä»ªè¡¨ç›˜åˆ·æ–°é—´éš”(ç§’)

# âš™ï¸ é«˜çº§é…ç½®
advanced:
  # è´Ÿè½½å‡è¡¡ç­–ç•¥
  load_balancing_strategy: "least_used"  # å¯é€‰: least_used, round_robin, priority
  
  # é…é¢é¢„æµ‹
  enable_quota_prediction: true          # å¯ç”¨é…é¢ä½¿ç”¨é¢„æµ‹
  prediction_window_hours: 24           # é¢„æµ‹æ—¶é—´çª—å£(å°æ—¶)
  
  # è‡ªåŠ¨æ¢å¤
  auto_recovery: true                   # å¯ç”¨è‡ªåŠ¨æ¢å¤æœºåˆ¶
  recovery_check_interval: 3600        # æ¢å¤æ£€æŸ¥é—´éš”(ç§’) - 1å°æ—¶
  
  # æˆæœ¬ä¼˜åŒ–
  enable_cost_optimization: true       # å¯ç”¨æˆæœ¬ä¼˜åŒ–
  preferred_model: "gemini-2.5-flash"  # é¦–é€‰ç»æµæ¨¡å‹
  fallback_model: "gemini-2.5-pro"     # fallbackåˆ°é«˜è´¨é‡æ¨¡å‹

# ğŸš¨ å‘Šè­¦é…ç½®
alerts:
  enable_notifications: true           # å¯ç”¨å‘Šè­¦é€šçŸ¥
  notification_methods:
    - "console"                        # æ§åˆ¶å°è¾“å‡º
    - "file"                          # æ–‡ä»¶æ—¥å¿—
    # - "email"                        # é‚®ä»¶é€šçŸ¥ (éœ€é…ç½®SMTP)
    # - "slack"                        # Slacké€šçŸ¥ (éœ€é…ç½®Webhook)
  
  # å‘Šè­¦æ¡ä»¶
  alert_conditions:
    quota_warning: true                # é…é¢è­¦å‘Š
    quota_exhausted: true              # é…é¢è€—å°½
    all_keys_exhausted: true           # æ‰€æœ‰å¯†é’¥è€—å°½
    api_error_rate_high: true          # APIé”™è¯¯ç‡è¿‡é«˜
    processing_capacity_low: true      # å¤„ç†èƒ½åŠ›ä¸è¶³

# ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹å‘½ä»¤
# 
# 1. æ£€æŸ¥é…é¢çŠ¶æ€:
#    python api_quota_monitor.py --config multi_key_config.yaml --check
#
# 2. æŒç»­ç›‘æ§æ¨¡å¼:
#    python api_quota_monitor.py --config multi_key_config.yaml --monitor --interval 300
#
# 3. å¤šå¯†é’¥æ‰¹é‡å¤„ç†:
#    python -m src.gs_video_report.cli.app batch test_videos \
#      --multi-key-config multi_key_config.yaml \
#      --output test_output \
#      --workers 2
#
# 4. ä½¿ç”¨å¤šå¯†é’¥å¤„ç†å•ä¸ªè§†é¢‘:
#    python multi_key_processor.py --config multi_key_config.yaml --video test_videos/sample.mp4

# ğŸ”— ç›¸å…³æ–‡æ¡£:
# - é…é¢ç®¡ç†æŒ‡å—: docs/guides/QUOTA_MANAGEMENT_GUIDE.md
# - APIæ•…éšœæ’æŸ¥: docs/troubleshooting/API_TROUBLESHOOTING_GUIDE.md
# - å¤šå¯†é’¥æ¶æ„: docs/architecture/10-å¤šå¯†é’¥ç®¡ç†æ¶æ„-multi-key-architecture.md
